webpackJsonp([1],{0:function(t,e){},"6Zot":function(t,e){},"7/DC":function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("7+uW"),o=s("mtWM"),a=s.n(o),i={name:"mymenu",data:function(){return{menuData:[]}},methods:{getData:function(){var t=this;a.a.get("/zhihu/api/4/themes").then(function(e){t.menuData=e.data.others;t.menuData.unshift({color:0,thumbnail:"",description:"",id:0,name:"今日新闻"})}).catch(function(t){})}},created:function(){this.getData()}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"menu"}},[s("div",{staticClass:"menu-list"},t._l(t.menuData,function(e){return s("router-link",{key:e.id,staticClass:"btn",attrs:{to:"/latest?aid="+e.id,"active-class":"active",exact:""}},[t._v(t._s(e.name))])}))])},staticRenderFns:[]};var c=s("VU/8")(i,r,!1,function(t){s("7/DC")},null,null).exports,m=s("NYxO"),u={state:{showLatestContent:!1,showComments:!1},getters:{getLatestContent:function(t){return t.showLatestContent},getShowComments:function(t){return t.showComments}},mutations:{setLatestContent:function(t){return t.showLatestContent?t.showLatestContent=!1:t.showLatestContent=!0},setShowComments:function(t){return t.showComments?t.showComments=!1:t.showComments=!0}},actions:{}};n.a.use(m.a);var l=new m.a.Store({state:{},getters:{},mutations:{},actions:{},modules:{latest:u}}),h={name:"latestContent",data:function(){return{art:[],storyExtra:{}}},methods:{getData:function(t){var e=this;e.art=[],a.a.all([this.getArticle(t),this.getComments(t)]).then(a.a.spread(function(t,s){e.art=t.data,e.storyExtra=s.data})).catch(function(t){t.response&&console.error("Error",t.response)})},getArticle:function(t){return a.a.get("/zhihu/api/4/news/"+t)},getComments:function(t){return a.a.get("/zhihu/api/4/story-extra/"+t)},hide:function(){l.commit("setLatestContent"),this.$router.back(-1)},openComments:function(){l.commit("setShowComments")},share:function(){}},watch:{$route:function(t,e){t.query.sid&&this.getData(t.query.sid)}},mounted:function(){this.$route.query.sid&&this.getData(this.$route.query.sid)}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"latestContent"},[s("div",{staticClass:"header-top"},[s("h1",{staticClass:"article-title",attrs:{title:t.art.title}},[t._v(t._s(t.art.title))]),t._v(" "),s("span",{staticClass:"back",on:{click:function(e){t.hide()}}},[t._v("返回")]),t._v(" "),s("span",{staticClass:"share",on:{click:function(e){t.share()}}},[t._v("分享")])]),t._v(" "),s("div",{staticClass:"article",domProps:{innerHTML:t._s(t.art.body)}},[s("div",[t._v(t._s(t.art.body))])]),t._v(" "),s("div",{staticClass:"storyExtra"},[s("span",[t._v("\n\t\t\t点赞 "+t._s(t.storyExtra.popularity)+"\n\t\t")]),t._v(" "),s("span",{on:{click:function(e){t.openComments()}}},[t._v("\n\t\t\t评论 "+t._s(t.storyExtra.comments)+"\n\t\t")])])])},staticRenderFns:[]};var v={name:"Comments",data:function(){return{longComments:[],shortComments:[]}},methods:{getData:function(t){var e=this;a.a.all([this.getLongComments(t),this.getShortComments(t)]).then(a.a.spread(function(t,s){e.longComments=t.data.comments,e.shortComments=s.data.comments})).catch(function(){})},getLongComments:function(t){return a.a.get("/zhihu/api/4/story/"+t+"/long-comments")},getShortComments:function(t){return a.a.get("/zhihu/api/4/story/"+t+"/short-comments")},closeComments:function(){l.commit("setShowComments")}},mounted:function(){this.$route.query.sid&&this.getData(this.$route.query.sid)}},C={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"comments"}},[s("div",{staticClass:"header-top"},[s("span",{staticClass:"back",on:{click:function(e){t.closeComments()}}},[t._v("返回")]),t._v("\n\t\t评论\n\n\t")]),t._v(" "),s("div",{staticClass:"comments-content"},[s("div",{staticClass:"comments",attrs:{id:"longComments"}},[s("h1",{staticClass:"comments-title"},[t._v("长评论："+t._s(t.longComments.length)+"条")]),t._v(" "),s("ul",{staticClass:"comments-list"},t._l(t.longComments,function(e){return s("li",[s("img",{attrs:{src:e.avatar}}),t._v(" "),s("div",{staticClass:"comments-list-body"},[s("h2",{staticClass:"comments-list-body-author"},[t._v(t._s(e.author))]),t._v(" "),s("p",{staticClass:"comments-list-content"},[t._v(t._s(e.content))]),t._v(" "),s("div",{staticClass:"comments-list-footer"},[s("span",{staticClass:"comments-time"},[t._v(t._s(e.time))]),t._v(" "),s("span",{staticClass:"comments-likes"},[t._v(t._s(e.likes))])])])])}))]),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"comments",attrs:{id:"shortComments"}},[s("h1",{staticClass:"comments-title"},[t._v("短评论："+t._s(t.shortComments.length)+"条")]),t._v(" "),s("ul",{staticClass:"comments-list"},t._l(t.shortComments,function(e){return s("li",[s("img",{attrs:{src:e.avatar}}),t._v(" "),s("div",{staticClass:"comments-list-body"},[s("h2",{staticClass:"comments-list-body-author"},[t._v(t._s(e.author))]),t._v(" "),s("p",{staticClass:"comments-list-content"},[t._v(t._s(e.content))]),t._v(" "),s("div",{staticClass:"comments-list-footer"},[s("span",{staticClass:"comments-time"},[t._v(t._s(e.time))]),t._v(" "),s("span",{staticClass:"comments-likes"},[t._v(t._s(e.likes))])])])])}))])])])},staticRenderFns:[]};var f={name:"App",components:{menuBtn:c,latestContent:s("VU/8")(h,d,!1,function(t){s("sgWc"),s("dp8G")},null,null).exports,comments:s("VU/8")(v,C,!1,function(t){s("6Zot")},null,null).exports},computed:{showLatestContent:function(){return this.$store.getters.getLatestContent},showComments:function(){return this.$store.getters.getShowComments}}},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("header",{staticClass:"header-top"},[t._v("知乎日报")]),t._v(" "),s("menu-btn"),t._v(" "),s("router-view"),t._v(" "),t.showLatestContent?s("latestContent"):t._e(),t._v(" "),t.showComments?s("comments"):t._e()],1)},staticRenderFns:[]};var p=s("VU/8")(f,_,!1,function(t){s("hamY")},null,null).exports,g=s("/ocq"),w={name:"latest",data:function(){return{stories:[],storyExtra:[]}},methods:{getImage:function(t){if(void 0!==t)return t[0].replace(/http\w{0,1}:\/\/p/g,"https://images.weserv.nl/?url=p")},getNewsContent:function(t){this.$router.push({path:this.$route.fullPath,query:{sid:t}}),l.commit("setLatestContent")},getData:function(t){var e=this,s="";s=0==t||void 0==t?"/news/latest":"/theme/"+t,a.a.get("/zhihu/api/4"+s).then(function(t){e.stories=t.data.stories}).catch(function(t){t.response&&console.error("Error",t.response)})}},created:function(){this.getData(this.$route.query.aid)},watch:{$route:function(t,e){this.getData(t.query.aid)},stories:function(t,e){}}},y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"latest"}},[s("ul",{staticClass:"stories"},t._l(t.stories,function(e,n){return s("li",{on:{click:function(s){t.getNewsContent(e.id)}}},[s("img",{attrs:{src:t.getImage(e.images)}}),t._v(" "),s("h1",[t._v(t._s(e.title)+"\n\t\t\t")])])}))])},staticRenderFns:[]};var $=s("VU/8")(w,y,!1,function(t){s("iif7")},null,null).exports;n.a.use(g.a);var L=new g.a({routes:[{path:"/",redirect:"/latest?aid=0"},{path:"/latest",name:"Latest",component:$,children:[{path:"/latest/?aid=0",component:$}]}]}),D=s("LyPZ");n.a.use(D.a),n.a.config.productionTip=!1,n.a.prototype.$ajax=a.a,new n.a({el:"#app",router:L,store:l,components:{App:p},template:"<App/>"})},dp8G:function(t,e){},hamY:function(t,e){},iif7:function(t,e){},sgWc:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.fd0baab03db1e0b2f267.js.map