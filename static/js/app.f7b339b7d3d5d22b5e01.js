webpackJsonp([1],{0:function(t,e,i){i("briU"),t.exports=i("NHnr")},1:function(t,e){},"1e5E":function(t,e){},"1tMp":function(t,e){},2:function(t,e){},"38NL":function(t,e){},"5s8g":function(t,e){},"7kt7":function(t,e){},AWBk:function(t,e){},EVCy:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("MVMM"),n=i("aozt"),a=i.n(n),o=i("9rMa"),r={state:{isShow:!1,starlistAll:{},starName:"",BangList:[]},getters:{getIsShow:function(t){return t.isShow},getstarList:function(t){return t.starlistAll},getStarMusicList:function(t){return t.starlistAll[t.starName]},getBangList:function(t){return t.BangList}},mutations:{isShowList:function(t){return t.isShow?t.isShow=!1:t.isShow=!0},setStarlistAll:function(t,e){t.starlistAll=e},setStarname:function(t,e){t.starName=e},setBangList:function(t,e){t.BangList=e}},actions:{set_isShowList:function(t){(0,t.commit)("isShowList")},set_starlistAll:function(t,e){(0,t.commit)("setStarlistAll",e)},set_Starname:function(t,e){(0,t.commit)("setStarname",e)}}},c={state:{audioElement:"",audio:{id:0,name:"",img:"",artist:"",album:"",src:""},musicList:[],songSheetType:"",currentIndex:0,playing:!1,waiting:!1,playType:1,currentTime:0,musicDuration:0,musicLoadStart:!1,duration:0,loop:!1},getters:{getaudioElement:function(t){return t.audioElement},getAudioInfo:function(t){return t.musicList[t.currentIndex]},getMusicList:function(t){return t.musicList},getMusicInfo:function(t){return t.musicList[t.currentIndex]},getPlaying:function(t){return t.playing},getDuration:function(t){return t.duration},getcurrentTime:function(t){return t.currentTime},getPlayType:function(t){return t.playType},getLoop:function(t){return t.loop}},mutations:{setaudioElement:function(t,e){return t.audioElement=e},setAudioSrc:function(t){t.audioElement.setAttribute("src",t.musicList[t.currentIndex].url),t.audioElement.load()},setCurrentIndex:function(t,e){return t.currentIndex=e},setMusicList:function(t,e){t.musicList=e},setCurrentTime:function(t,e){t.currentTime=e},setPlayType:function(t,e){t.playType=e},setLoop:function(t,e){t.loop=e},playIndex:function(t,e){t.currentIndex=e.index,t.audioElement.setAttribute("src",t.musicList[t.currentIndex].url),t.playing=!0,t.audioElement.load(),t.audioElement.play()},play:function(t){t.playing=!0,t.audioElement.play()},pause:function(t){t.playing=!1,t.audioElement.pause()},togglePlay:function(t){t.playing?(t.playing=!1,t.audioElement.pause()):(t.playing=!0,t.audioElement.play())},playEnded:function(t){if(3!=t.playType){t.currentIndex++;var e=t.musicList.length;t.currentIndex>=e&&(t.currentIndex=0),t.audioElement.setAttribute("src",t.musicList[t.currentIndex].url),t.playing=!0,t.audioElement.load(),t.audioElement.play()}},playPrev:function(t){t.currentIndex--;var e=t.musicList.length;console.log(t.musicList),alert(e),t.currentIndex<0&&(t.currentIndex=e-1),t.audioElement.setAttribute("src",t.musicList[t.currentIndex].url),t.playing=!0,t.audioElement.load(),t.audioElement.play()},playNext:function(t){t.currentIndex++;var e=t.musicList.length;t.currentIndex>=e&&(t.currentIndex=0),t.audioElement.setAttribute("src",t.musicList[t.currentIndex].url),t.playing=!0,t.audioElement.load(),t.audioElement.play()},setDuration:function(t,e){t.duration=e.duration}},actions:{set_audioElement:function(t,e){(0,t.commit)("setaudioElement",e)},set_audioSrc:function(t,e){(0,t.commit)("setAudioSrc",e)},set_playEnded:function(t){t("playEnded")},set_duration:function(t,e){(0,t.commit)("setDuration",e)},set_CurrentTime:function(t,e){(0,t.commit)("setCurrentTime",e.time)},set_playType:function(t,e){(0,t.commit)("setPlayType",e.num)}}},u={state:{isShowMusic:!1},getters:{getIsShowMusic:function(t){return t.isShowMusic}},mutations:{set_isShowMusic:function(t){return t.isShowMusic?t.isShowMusic=!1:t.isShowMusic=!0}},actions:{}},l={state:{videoList:[],videoIndex:0,showVideo:!1},getters:{getvideoList:function(t){return t.videoList},getNowVideo:function(t){return t.videoList[t.videoIndex]},getShowVideo:function(t){return t.showVideo}},mutations:{setVideoList:function(t,e){t.videoList=e},setVideoIndex:function(t,e){t.videoIndex=e},setShowVideo:function(t){return t.showVideo?t.showVideo=!1:t.showVideo=!0}},actions:{}},d=i("3cXf"),m=i.n(d),f={state:{loveList:[]},getters:{getLoveList:function(t){return t.loveList},getIsLove:function(t,e){return t.isLove}},mutations:{setLoveList:function(t,e){t.loveList=e},addloveMusic:function(t,e){t.loveList.push(e),localStorage.setItem("loveList",m()(t.loveList))},removeCollection:function(t,e){t.loveList.splice(t.loveList.indexOf(e),1),localStorage.setItem("loveList",m()(t.loveList))}},actions:{}};s.default.use(o.a);var p=new o.a.Store({state:{},getters:{},mutations:{},actions:{},modules:{songList:r,Audio:c,Music:u,Video:l,Collection:f}}),g={name:"song",data:function(){return{}},methods:{playIndex:function(t){p.commit("setMusicList",this.songs),p.commit({type:"playIndex",index:t})}},computed:{songs:function(){return this.$store.getters.getBangList}}},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"songs"},[i("ul",{staticClass:"song-list"},t._l(t.songs,function(e,s){return i("li",{attrs:{"data-id":e},on:{click:function(e){t.playIndex(s)}}},[i("span",{staticClass:"song-list-img"},[i("img",{attrs:{src:e.img,width:"24",height:"24"}})]),t._v(" "),i("div",{staticClass:"song-list-content"},[i("h1",[t._v(t._s(e.name))]),t._v(" "),i("p",[t._v(t._s(e.artist)+"("+t._s(e.album)+")")])])])}))])},staticRenderFns:[]};var h=i("Z0/y")(g,v,!1,function(t){i("AWBk")},null,null).exports,y={name:"star",data:function(){return{}},methods:{open:function(t){p.dispatch("set_isShowList"),p.dispatch("set_Starname",t)}},computed:{starlist:function(){return this.$store.getters.getstarList}}},_={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"star"},[i("ul",{staticClass:"star-list"},t._l(t.starlist,function(e){return i("li",{on:{click:function(i){t.open(e.name)}}},[i("img",{attrs:{src:e.img}}),t._v(" "),i("h2",[t._v(t._s(e.name))])])}))])},staticRenderFns:[]};var C=i("Z0/y")(y,_,!1,function(t){i("38NL")},null,null).exports,L={name:"mv",data:function(){return{mvList:{}}},methods:{getData:function(){var t=this;a.a.get("../../../static/mv.json").then(function(e){t.mvList=e.data,p.commit("setVideoList",e.data)}).catch(function(t){console.log(t)})},playVideo:function(t){p.commit("setVideoIndex",t),p.commit("setShowVideo"),p.commit("pause")}},created:function(){this.getData()},computed:{}},w={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mv"},[i("ul",{staticClass:"mv-list"},t._l(t.mvList,function(e,s){return i("li",{on:{click:function(e){t.playVideo(s)}}},[i("div",{staticClass:"mask"}),t._v(" "),i("div",{staticClass:"playdetail icon-playdetail"}),t._v(" "),i("img",{attrs:{src:e.img}}),t._v(" "),i("h1",[t._v(t._s(e.title))]),t._v(" "),i("h1",{staticClass:"videoName"},[t._v(t._s(e.name))])])}))])},staticRenderFns:[]};var I=i("Z0/y")(L,w,!1,function(t){i("z3LK")},null,null).exports,x={name:"starList",data:function(){return{}},methods:{hide:function(){p.dispatch("set_isShowList")},playmusic:function(t,e){p.commit("setMusicList",this.songlist.data),p.commit({type:"playIndex",index:e})}},computed:{isShow:function(){return this.$store.getters.getIsShow},songlist:function(){return this.$store.getters.getStarMusicList}}},P={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"sideUp"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"starList",attrs:{transiton:"sideUp"}},[i("div",{staticClass:"starListcontainer"},[i("div",{staticClass:"mu-appbar"},[i("div",{staticClass:"hide",on:{click:t.hide}},[i("i",{staticClass:"iconfont icon-left"}),i("span",[t._v("歌手")])])]),t._v(" "),i("div",{staticClass:"star-list-header"},[i("div",{staticClass:"lazyLoad"},[i("img",{attrs:{src:t.songlist.img}})]),t._v(" "),i("div",{staticClass:"star-info"},[i("h3",[t._v(t._s(t.songlist.name))]),t._v(" "),i("p",[i("span",{staticClass:"badge"},[t._v("歌手")])]),t._v(" "),i("p",[t._v("标签：华语/流行")])])]),t._v(" "),i("div",{staticClass:"star-list-content"},[i("ul",[i("li",[i("i"),t._v(" "),i("span",{staticClass:"name"},[t._v("音乐标题")]),t._v(" "),i("span",{staticClass:"album"},[t._v("专辑")])]),t._v(" "),t._l(t.songlist.data,function(e,s){return i("li",{attrs:{"data-id":t.songlist.name},on:{click:function(e){t.playmusic(t.songlist.name,s)}}},[i("i",[t._v(t._s(s+1))]),t._v(" "),i("span",{staticClass:"name"},[t._v(t._s(e.name))]),t._v(" "),i("span",{staticClass:"album"},[t._v(t._s(e.album))])])})],2)])])])])},staticRenderFns:[]};var S={name:"musicBar",data:function(){return{}},methods:{playpause:function(){p.commit("togglePlay")},openMusic:function(){p.commit("set_isShowMusic")}},computed:{isplaying:function(){return this.$store.getters.getPlaying},musicImg:function(){return this.$store.getters.getAudioInfo?this.$store.getters.getAudioInfo.img:""},musicName:function(){return this.$store.getters.getAudioInfo?this.$store.getters.getAudioInfo.name:""},musicArtist:function(){return this.$store.getters.getAudioInfo?this.$store.getters.getAudioInfo.artist:""}}},$={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"musicBar",on:{click:t.openMusic}},[i("div",{staticClass:"footerContent"},[i("div",{staticClass:"songImg"},[i("img",{attrs:{src:t.musicImg}})]),t._v(" "),i("div",{staticClass:"songInfo"},[i("p",{staticClass:"songName"},[t._v(t._s(t.musicName))]),t._v(" "),i("p",{staticClass:"songRemark"},[t._v(t._s(t.musicArtist))])]),t._v(" "),i("div",{staticClass:"operation"},[i("span",{staticClass:"iconfont",class:t.isplaying?"icon-pause-detail":"icon-playdetail",on:{click:function(e){return e.stopPropagation(),t.playpause(e)}}}),t._v(" "),i("span",{staticClass:"iconfont icon-list-music"})])])])},staticRenderFns:[]};var E={name:"music",data:function(){return{isplay:!1,exceed:!1,name:""}},methods:{closeMusic:function(){p.commit("set_isShowMusic")},playpause:function(){p.commit("togglePlay")},playPrev:function(){p.commit("playPrev")},playNext:function(){p.commit("playNext")},playType:function(){var t=this.$store.getters.getPlayType;++t>3&&(t=1),p.dispatch({type:"set_playType",num:t})},switchTime:function(t){var e=Math.floor(t/60),i=Math.floor(t%60);return e<10&&(e="0"+e),i<10&&(i="0"+i),e+":"+i},islove:function(){var t=this.$store.getters.getMusicInfo;this.isLove?p.commit("removeCollection",t):p.commit("addloveMusic",t)}},computed:{isLove:function(){return-1!=this.$store.getters.getLoveList.indexOf(this.$store.getters.getAudioInfo)},isShowMusic:function(){return this.$store.getters.getIsShowMusic},musicImg:function(){return this.$store.getters.getAudioInfo?this.$store.getters.getAudioInfo.img:""},musicName:function(){return this.$store.getters.getAudioInfo?(this.$store.getters.getAudioInfo.name,this.name=this.$store.getters.getAudioInfo.name):"未知歌名"},musicArtist:function(){return this.$store.getters.getAudioInfo?this.$store.getters.getAudioInfo.artist:"未知歌手"},isplaying:function(){return this.isplay=this.$store.getters.getPlaying,this.$store.getters.getPlaying},musicCurrentTime:function(){return this.$store.getters.getcurrentTime?this.switchTime(this.$store.getters.getcurrentTime):"00:00"},musicDuration:function(){return this.$store.getters.getDuration?this.switchTime(this.$store.getters.getDuration):"00:00"},musicPalyType:function(){var t="icon-music-shunxu";switch(this.$store.getters.getPlayType){case 1:t="icon-music-shunxu",p.commit("setLoop",!1);break;case 2:t="icon-music-random",p.commit("setLoop",!1);break;case 3:t="icon-music-danqu1",p.commit("setLoop",!0)}return t},rangeProgress:function(){return this.$store.getters.getcurrentTime/this.$store.getters.getDuration*100}},watch:{isplay:function(t,e){if(!t){var i=getComputedStyle(this.$refs.rotate).transform,s=getComputedStyle(this.$refs.rotateImg).transform;this.$refs.rotate.style.transform="none"===i?s:s.concat("",i)}},name:function(t,e){var i=this;this.exceed=!1,setTimeout(function(){var t=i.$refs.namebox.getBoundingClientRect().width,e=i.$refs.musicname.getBoundingClientRect().width;return i.exceed=e>t},1e3)}}},T={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"sideUp"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowMusic,expression:"isShowMusic"}],staticClass:"music",attrs:{transiton:"sideUp"}},[i("div",{staticClass:"musicBg",style:{backgroundImage:"url("+t.musicImg+")"}}),t._v(" "),i("div",{staticClass:"musiccontainer"},[i("div",{staticClass:"musicHeader"},[i("div",{staticClass:"musicBack hide",on:{click:t.closeMusic}},[i("i",{staticClass:"iconfont icon-left"})]),t._v(" "),i("div",{ref:"namebox",staticClass:"musicTitle"},[i("p",{ref:"musicname",staticClass:"musicName",class:t.exceed?"scroll":""},[t._v(t._s(t.musicName))])]),t._v(" "),i("div",{staticClass:"musicShare"},[i("i",{staticClass:"iconfont icon-share"})])]),t._v(" "),i("p",{staticClass:"musicArtist"},[t._v(t._s(t.musicArtist))]),t._v(" "),i("div",{ref:"rotate",staticClass:"rotate"},[i("div",{ref:"rotateImg",staticClass:"rotateImg",class:t.isplaying?"active":""},[i("img",{attrs:{src:t.musicImg}}),t._v(" "),i("div",{staticClass:"rotateImgBg"})])]),t._v(" "),i("div",{staticClass:"more"},[i("span",{staticClass:"icon-like",class:t.isLove?"active":"",on:{click:t.islove}}),t._v(" "),i("span",{staticClass:"icon-download"}),t._v(" "),i("span",{staticClass:"icon-msg"}),t._v(" "),i("span",{staticClass:"icon-list-circle"})]),t._v(" "),i("div",{staticClass:"range"},[i("div",{staticClass:"rangeContent"},[i("div",{staticClass:"rangeBtn",style:"left:"+t.rangeProgress+"%"}),t._v(" "),i("div",{staticClass:"rangeProgress",style:"width:"+t.rangeProgress+"%"}),t._v(" "),i("div",{staticClass:"rangeRunway"})]),t._v(" "),i("div",{staticClass:"currentTime"},[i("span",{staticClass:"sTime"},[t._v(t._s(t.musicCurrentTime))]),t._v(" "),i("span",{staticClass:"eTime"},[t._v(t._s(t.musicDuration))])])]),t._v(" "),i("div",{staticClass:"musicfooter"},[i("span",{staticClass:"iconfont",class:t.musicPalyType,on:{click:function(e){return"button"in e||!t._k(e.keyCode,"top",void 0,e.key,void 0)?t.playType(e):null}}}),t._v(" "),i("span",{staticClass:"iconfont icon-prevdetail",on:{click:function(e){return e.stopPropagation(),t.playPrev(e)}}}),t._v(" "),i("span",{staticClass:"iconfont",class:t.isplaying?"icon-pause-detail":"icon-playdetail",on:{click:function(e){return e.stopPropagation(),t.playpause(e)}}}),t._v(" "),i("span",{staticClass:"iconfont icon-nextdetail",on:{click:function(e){return e.stopPropagation(),t.playNext(e)}}}),t._v(" "),i("span",{staticClass:"iconfont icon-list-music"})])])])])},staticRenderFns:[]};var M={name:"videoPlay",data:function(){return{playerOptions:{muted:!0,language:"zh-CN",autoplay:!0,sources:[{type:"video/mp4",src:"https://cdn.theguardian.tv/webM/2015/07/20/150716YesMen_synd_768k_vp8.webm"}],poster:""}}},mounted:function(){console.log("dynamic change options",this.player),this.player.muted(!1)},computed:{player:function(){return this.$refs.videoPlayer.player}},methods:{onPlayerPlay:function(t){},onPlayerPause:function(t){},onPlayerEnded:function(t){},onPlayerLoadeddata:function(t){},onPlayerWaiting:function(t){},onPlayerPlaying:function(t){},onPlayerTimeupdate:function(t){},onPlayerCanplay:function(t){},onPlayerCanplaythrough:function(t){},playerStateChanged:function(t){},playerReadied:function(t){console.log("example player 1 readied",t)},closeVideo:function(){p.commit("setShowVideo")}},created:function(){this.playerOptions.poster=this.$store.getters.getNowVideo.img}},A={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"videoPlay"},[i("span",{staticClass:"iconfont icon-close",on:{click:t.closeVideo}}),t._v(" "),i("video-player",{ref:"videoPlayer",staticClass:"vjs-custom-skin",attrs:{options:t.playerOptions,playsinline:!0},on:{play:function(e){t.onPlayerPlay(e)},pause:function(e){t.onPlayerPause(e)},ended:function(e){t.onPlayerEnded(e)},loadeddata:function(e){t.onPlayerLoadeddata(e)},waiting:function(e){t.onPlayerWaiting(e)},playing:function(e){t.onPlayerPlaying(e)},timeupdate:function(e){t.onPlayerTimeupdate(e)},canplay:function(e){t.onPlayerCanplay(e)},canplaythrough:function(e){t.onPlayerCanplaythrough(e)},ready:t.playerReadied,statechanged:function(e){t.playerStateChanged(e)}}})],1)},staticRenderFns:[]};var k={name:"App",data:function(){return{navList:[{name:"榜单",link:"/bang"},{name:"歌手",link:"/star"},{name:"收藏",link:"/collection"},{name:"MV",link:"/mv"}]}},methods:{handleTabChange:function(t){this.activeTab=t},handleActive:function(){window.alert("tab active")},musicEnded:function(){p.commit("playEnded")},musicError:function(){},paused:function(){p.commit("pause")},musicCanPlay:function(){p.dispatch({type:"set_duration",duration:Math.floor(this.$refs.audio.duration)})},musicTimeUpdate:function(){p.dispatch({type:"set_CurrentTime",time:Math.floor(this.$refs.audio.currentTime)})}},components:{song:h,star:C,starList:i("Z0/y")(x,P,!1,function(t){i("EVCy")},null,null).exports,musicBar:i("Z0/y")(S,$,!1,function(t){i("1e5E")},null,null).exports,music:i("Z0/y")(E,T,!1,function(t){i("Vgol")},null,null).exports,mv:I,videoPlay:i("Z0/y")(M,A,!1,function(t){i("7kt7")},null,null).exports},created:function(){var t=this;a.a.get("../static/music.json").then(function(e){p.commit("setBangList",e.data),p.commit("setMusicList",e.data),p.dispatch("set_audioElement",t.$refs.audio),p.commit("setCurrentIndex",0),p.commit("setAudioSrc")}).catch(function(t){console.log(t)}),a.a.get("../static/star.json").then(function(t){p.dispatch("set_starlistAll",t.data)}).catch(function(t){console.log(t)});var e=null==localStorage.getItem("loveList")?[]:JSON.parse(localStorage.getItem("loveList"));p.commit("setLoveList",e)},computed:{showList:function(){return this.$store.getters.getIsShow},playing:function(){return this.$store.getters.getPlaying},isLoop:function(){return this.$store.getters.getLoop},showVideo:function(){return this.$store.getters.getShowVideo}}},V={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("audio",{ref:"audio",attrs:{id:"myaudio",src:"",loop:t.isLoop},on:{timeupdate:t.musicTimeUpdate,canplay:t.musicCanPlay,ended:t.musicEnded,error:t.musicError,paused:t.paused}}),t._v(" "),i("div",{staticClass:"header"},t._l(t.navList,function(e){return i("router-link",{attrs:{to:e.link,"active-class":"active"}},[t._v(t._s(e.name))])})),t._v(" "),i("keep-alive",[i("router-view")],1),t._v(" "),i("music-bar"),t._v(" "),i("music"),t._v(" "),t.showVideo?i("videoPlay"):t._e(),t._v(" "),t.showList?i("star-list"):t._e()],1)},staticRenderFns:[]};var b=i("Z0/y")(k,V,!1,function(t){i("z3L9")},null,null).exports,N=i("zO6J"),B={name:"song",methods:{playIndex:function(t){p.commit("setMusicList",this.songs),p.commit({type:"playIndex",index:t})}},computed:{songs:function(){return this.$store.getters.getLoveList}}},R={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"collection"},[i("ul",{staticClass:"song-list"},t._l(t.songs,function(e,s){return i("li",{attrs:{"data-id":e},on:{click:function(e){t.playIndex(s)}}},[i("span",{staticClass:"song-list-img"},[i("img",{attrs:{src:e.img,width:"24",height:"24"}})]),t._v(" "),i("div",{staticClass:"song-list-content"},[i("h1",[t._v(t._s(e.name))]),t._v(" "),i("p",[t._v(t._s(e.artist)+"("+t._s(e.album)+")")])])])}))])},staticRenderFns:[]};var D=i("Z0/y")(B,R,!1,function(t){i("1tMp")},null,null).exports;s.default.use(N.a);var F=new N.a({routes:[{path:"/",name:"",component:h},{path:"/bang",name:"song",component:h},{path:"/star",name:"star",component:C},{path:"/collection",name:"collection",component:D},{path:"/mv",name:"mv",component:I}]}),Z=i("q2H9"),z=i.n(Z),O=(i("5s8g"),i("VpFf"),i("CRWL")),U=i.n(O),j=(i("r8N3"),i("xRBc"),i("LyPZ"));s.default.use(j.a),s.default.use(z.a),s.default.use(U.a),s.default.prototype.$ajax=a.a,s.default.config.productionTip=!1,new s.default({el:"#app",router:F,store:p,components:{App:b},template:"<App/>"})},Vgol:function(t,e){},VpFf:function(t,e){},r8N3:function(t,e){},xRBc:function(t,e){},z3L9:function(t,e){},z3LK:function(t,e){}},[0]);
//# sourceMappingURL=app.f7b339b7d3d5d22b5e01.js.map